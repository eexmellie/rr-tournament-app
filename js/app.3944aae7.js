(function(e){function t(t){for(var r,o,u=t[0],i=t[1],c=t[2],m=0,d=[];m<u.length;m++)o=u[m],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);l&&l(t);while(d.length)d.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,u=1;u<n.length;u++){var i=n[u];0!==a[i]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},s=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/rr-tournament-app/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var l=i;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"15db":function(e,t,n){"use strict";n("d612")},"433b":function(e,t,n){},"445d":function(e,t,n){},"50c0":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app",attrs:{id:"app"}},[n("div",{staticClass:"app__sidebar"},[n("div",{staticClass:"app__title title"},[e._v(" Round Robin Tournament App ")]),e.tournaments.length?n("RRTournamentList",{attrs:{tournaments:e.tournaments},on:{"tournament-create":e.createTournament},model:{value:e.selectedTournamentIndex,callback:function(t){e.selectedTournamentIndex=t},expression:"selectedTournamentIndex"}}):e._e()],1),n("main",{staticClass:"app__body"},[n("div",{staticClass:"app__content"},[e.selectedTournament?n("RRTournament",e._b({key:e.selectedTournament.id,attrs:{"tournament-index":e.selectedTournamentIndex},on:{"tournament-end":e.endTournament,"tournament-delete":e.deleteTournament}},"RRTournament",e.selectedTournament,!1)):n("RRTournamentCreate",{on:{"tournament-start":e.startTournament}})],1),n("footer",{staticClass:"app__footer footer"},[e._v(" Powered by Vue.js ")])])])},s=[],o=(n("e9c4"),n("d3b7"),n("b0c0"),n("d81d"),n("a434"),n("2909"));n("fb6a"),n("4de4"),n("caad"),n("2532"),n("99af");function u(e){var t=Object(o["a"])(e);t.length%2!==0&&t.push(null);var n=c(t),r=n.map((function(e){return{id:crypto.randomUUID(),matches:i(e).map((function(e){return{id:crypto.randomUUID(),playerIds:e,games:[],matchWinnerId:""}}))}}));return r}function i(e){var t=e.length/2,n=e.slice(0,t),r=e.slice(t).reverse(),a=n.map((function(e,t){return[e,r[t]]}));return a.filter((function(e){return!e.includes(null)}))}function c(e){for(var t=[Object(o["a"])(e)],n=0;n<e.length-2;n++)t.push(l(t[n]));return t}function l(e){return[e[0]].concat(Object(o["a"])(e.slice(2)),[e[1]])}var m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tournament"},[n("div",{staticClass:"tournament__header"},[n("h2",{staticClass:"tournament__header-item title"},[e._v(" "+e._s(e.name)+" ")]),e.canTournamentBeEnded?n("button",{staticClass:"tournament__header-item button",on:{click:e.endTournament}},[e._v(" End tournament ")]):e._e(),n("button",{staticClass:"tournament__header-item button button--danger",on:{click:e.deleteTournament}},[e._v(" Delete tournament ")])]),n("RRTournamentResults",e._b({},"RRTournamentResults",e.$props,!1)),e._l(e.rounds,(function(t,r){return n("RRTournamentRound",{key:t.id,staticClass:"tournament__round",attrs:{round:t,"round-number":r+1,"players-order":e.playersOrder,"player-names":e.playerNames}})}))],2)},d=[],p=(n("a9e3"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"round"},[n("div",{staticClass:"round__title title"},[e._v(" Round "+e._s(e.roundNumber)+" ")]),n("table",[n("thead",[n("tr",[n("th",[e._v("VS")]),e._l(e.MAX_GAMES_PER_MATCH,(function(t){return n("th",{key:t},[e._v(" Game "+e._s(t)+" ")])})),n("th",{attrs:{title:"Chicken Dinner"}},[e._v(" Winner ")])],2)]),n("tbody",e._l(e.round.matches,(function(t){return n("tr",{key:t.id},[n("td",[e._v(e._s(e.playerNames[t.playerIds[0]])+" vs "+e._s(e.playerNames[t.playerIds[1]]))]),e._l(t.games,(function(t){return n("td",{key:t.id},[e._v(" "+e._s(t.scores[0]+" - "+t.scores[1])+" ")])})),t.matchWinnerId?e._e():n("td",[n("button",{staticClass:"button button--round",attrs:{type:"button"},on:{click:function(n){return e.setActiveMatch(t)}}},[e._v(" + ")])]),e._l(e.numberOfUnplayableGames[t.id],(function(t){return n("td",{key:t},[e._v(" - ")])})),n("td",[e._v(e._s(e.playerNames[t.matchWinnerId]))])],2)})),0)]),e.activeMatch?n("RRTournamentAddScores",{ref:"modal",attrs:{"player-a-name":e.playerNames[e.activeMatch.playerIds[0]],"player-b-name":e.playerNames[e.activeMatch.playerIds[1]]},on:{"submit-match-scores":e.setGameScores,"cancel-match-scores":e.unsetActiveMatch}}):e._e()],1)}),f=[],h=n("b85c"),_=n("ade3"),y=3,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("dialog",{staticClass:"dialog"},[n("form",{staticClass:"form",on:{submit:function(t){return t.preventDefault(),e.submitMatchScores.apply(null,arguments)}}},[n("label",{staticClass:"form__label",attrs:{for:"player-a-name"}},[e._v(" "+e._s(e.playerAName)+" ")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.playerAScore,expression:"playerAScore",modifiers:{number:!0}}],staticClass:"form__input",attrs:{id:"player-a-name",type:"number",min:"0",step:"1",required:""},domProps:{value:e.playerAScore},on:{input:function(t){t.target.composing||(e.playerAScore=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),n("label",{staticClass:"form__label",attrs:{for:"player-b-name"}},[e._v(" "+e._s(e.playerBName)+" ")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.playerBScore,expression:"playerBScore",modifiers:{number:!0}}],staticClass:"form__input",attrs:{id:"player-b-name",type:"number",min:"0",step:"1",required:""},domProps:{value:e.playerBScore},on:{input:function(t){t.target.composing||(e.playerBScore=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),n("div",{staticClass:"form__row"},[n("button",{staticClass:"button button--danger",attrs:{type:"button"},on:{click:e.cancelModal}},[e._v(" Cancel ")]),n("button",{staticClass:"button",attrs:{type:"submit"}},[e._v(" Add Scores ")])])])])},b=[],T=n("a562"),g={name:"RRTournamentAddScores",props:{playerAName:{type:String,required:!0},playerBName:{type:String,required:!0}},data:function(){return{playerAScore:null,playerBScore:null}},mounted:function(){T["a"].registerDialog(this.$el)},methods:{submitMatchScores:function(){var e=this.playerAScore,t=this.playerBScore;this.$emit("submit-match-scores",{playerAScore:e,playerBScore:t})},cancelModal:function(){this.$emit("cancel-match-scores")}}},R=g,C=(n("753d"),n("2877")),O=Object(C["a"])(R,v,b,!1,null,null,null),S=O.exports,I={name:"RRTournamentRound",components:{RRTournamentAddScores:S},props:{round:{type:Object,required:!0},roundNumber:{type:Number,required:!0},playersOrder:{type:Array,required:!0},playerNames:{type:Object,required:!0}},data:function(){return{MAX_GAMES_PER_MATCH:y,activeMatch:null}},computed:{numberOfUnplayableGames:function(){return this.round.matches.reduce((function(e,t){return e[t.id]=y-t.games.length,t.matchWinnerId||e[t.id]--,e}),{})}},methods:{setActiveMatch:function(e){this.activeMatch=e,this.$nextTick(this.showScoresModal)},showScoresModal:function(){this.$refs.modal.$el.showModal()},setGameScores:function(e){this.activeMatch.games.push({id:crypto.randomUUID(),scores:[e.playerAScore,e.playerBScore],gameWinnerId:this.getGameWinnerId(e)}),this.maybeSetMatchWinner(),this.unsetActiveMatch()},unsetActiveMatch:function(){this.activeMatch=null},getGameWinnerId:function(e){var t=e.playerAScore>e.playerBScore?0:1;return this.activeMatch.playerIds[t]},maybeSetMatchWinner:function(){var e,t,n=Math.ceil(y/2),r=(e={},Object(_["a"])(e,this.activeMatch.playerIds[0],0),Object(_["a"])(e,this.activeMatch.playerIds[1],0),e),a=Object(h["a"])(this.activeMatch.games);try{for(a.s();!(t=a.n()).done;){var s=t.value,o=s.gameWinnerId;if(r[o]++,r[o]===n)return void(this.activeMatch.matchWinnerId=o)}}catch(u){a.e(u)}finally{a.f()}}}},j=I,M=(n("8cbc"),Object(C["a"])(j,p,f,!1,null,"1c75651e",null)),N=M.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"result"},[e.winners?[n("div",{staticClass:"result__winners"},[n("b",[e._v("Winners:")]),e._v(" "+e._s(e.winners)+" ")])]:e._e(),n("table",{staticClass:"result__table"},[n("thead",[n("tr",[n("th"),e._l(e.playersOrder,(function(t){return n("th",{key:t},[e._v(" "+e._s(e.playerNames[t])+" ")])})),n("th",{staticClass:"result__contrast-cell"},[e._v(" Points ")]),n("th",{staticClass:"result__contrast-cell"},[e._v(" Rank ")])],2)]),n("tbody",e._l(e.playersOrder,(function(t){return n("tr",{key:t},[n("td",[e._v(e._s(e.playerNames[t]))]),e._l(e.playersOrder,(function(r){return n("td",{key:r,staticClass:"result__cell",class:{empty:t===r}},[e._v(" "+e._s(e.formatMatchResult(t,r))+" ")])})),n("td",{staticClass:"result__cell result__contrast-cell"},[e._v(" "+e._s(e.totalPoints[t])+" ")]),n("td",{staticClass:"result__cell result__contrast-cell"},[e._v(" "+e._s(e.rank[t]||"-")+" ")])],2)})),0)])],2)},A=[],w=n("3835"),k=(n("07ac"),n("4e82"),n("4fad"),n("a15b"),{name:"RRTournamentResults",props:{name:{type:String,required:!0},playersOrder:{type:Array,required:!0},playerNames:{type:Object,required:!0},rounds:{type:Array,required:!0},hasEnded:{type:Boolean,required:!0}},computed:{matchResults:function(){return this.rounds.reduce((function(e,t){return t.matches.reduce((function(e,t){if(!t.matchWinnerId)return e;var n=Object(w["a"])(t.playerIds,2),r=n[0],a=n[1],s=t.matchWinnerId===r;return e[r]?e[r][a]=s:e[r]=Object(_["a"])({},a,s),e[a]?e[a][r]=!s:e[a]=Object(_["a"])({},r,!s),e}),e),e}),{})},totalPoints:function(){var e=this;return this.playersOrder.reduce((function(t,n){return e.matchResults[n]?t[n]=Object.values(e.matchResults[n]).filter(Boolean).length:t[n]=0,t}),{})},rank:function(){var e=Object.entries(this.totalPoints).sort((function(e,t){var n=Object(w["a"])(e,2),r=n[1],a=Object(w["a"])(t,2),s=a[1];return s-r})),t=e.reduce((function(e,t){var n=Object(w["a"])(t,2),r=n[0],a=n[1];return e.length&&e[e.length-1].points===a?e[e.length-1].players.push(r):e.push({points:a,players:[r]}),e}),[]);if(1===t.length&&0===t[0].points)return{};var n=t.reduce((function(e,t,n){var r=t.players,a=r.reduce((function(e,t){return e[t]=n+1,e}),{});return Object.assign(e,a),e}),{});return n},winners:function(){var e=this;return this.hasEnded?Object.entries(this.rank).filter((function(e){var t=Object(w["a"])(e,2),n=t[1];return 1===n})).map((function(t){var n=Object(w["a"])(t,1),r=n[0];return e.playerNames[r]})).join(", "):null}},methods:{formatMatchResult:function(e,t){var n=e===t;if(n)return"";var r=this.matchResults[e];if(!r)return"";var a=void 0!==this.matchResults[e][t];return a?this.matchResults[e][t]?"1":"0":""}}}),q=k,$=(n("e6b1"),Object(C["a"])(q,x,A,!1,null,"4f90d1da",null)),P=$.exports,E={name:"RRTournament",components:{RRTournamentRound:N,RRTournamentResults:P},props:{name:{type:String,required:!0},hasEnded:{type:Boolean,required:!0},playersOrder:{type:Array,required:!0},playerNames:{type:Object,required:!0},rounds:{type:Array,required:!0},tournamentIndex:{type:Number,required:!0}},computed:{canTournamentBeEnded:function(){var e=this.rounds.every((function(e){return e.matches.every((function(e){return e.matchWinnerId}))}));return e&&!this.hasEnded}},methods:{endTournament:function(){this.$emit("tournament-end",this.tournamentIndex)},deleteTournament:function(){this.$emit("tournament-delete",this.tournamentIndex)}}},B=E,U=(n("81a8"),Object(C["a"])(B,m,d,!1,null,"d919b560",null)),W=U.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"form",on:{submit:function(t){return t.preventDefault(),e.startTournament.apply(null,arguments)}}},[n("label",{staticClass:"form__label",attrs:{for:"tournament-name"}},[e._v(" Tournament name: ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.tournamentName,expression:"tournamentName"}],staticClass:"form__input",attrs:{type:"text",name:"tournament-name",required:""},domProps:{value:e.tournamentName},on:{input:function(t){t.target.composing||(e.tournamentName=t.target.value)}}}),n("div",{staticClass:"form__label"},[e._v(" Participants: ")]),e._l(e.players,(function(t,r){return n("div",{key:r},[n("div",{staticClass:"form__row"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"player.name"}],staticClass:"form__input",attrs:{type:"text",required:""},domProps:{value:t.name},on:{input:function(n){n.target.composing||e.$set(t,"name",n.target.value)}}}),n("button",{directives:[{name:"show",rawName:"v-show",value:r||!r&&e.players.length>1,expression:"i || ( !i && players.length > 1)"}],staticClass:"button button--round",attrs:{type:"button"},on:{click:function(t){return e.remove(r)}}},[e._v(" − ")])])])})),n("div",{staticClass:"form__row"},[n("button",{staticClass:"button button--round",attrs:{type:"button",disabled:!e.canAddPlayers},on:{click:function(t){return e.add()}}},[e._v(" + ")]),n("button",{staticClass:"button",attrs:{type:"submit",disabled:!e.canTournamentBeStarted}},[e._v(" Start tournament ")])])],2)},G=[],J={name:"RRTournamentCreate",data:function(){return{tournamentName:"",players:[{name:"",id:crypto.randomUUID()}]}},computed:{canTournamentBeStarted:function(){return this.players.length>=3},canAddPlayers:function(){return this.players.every((function(e){return e.name}))}},methods:{add:function(){this.players.push({name:"",id:crypto.randomUUID()})},remove:function(e){this.players.splice(e,1)},startTournament:function(){var e=this.tournamentName,t=this.players;this.$emit("tournament-start",{tournamentName:e,tournamentId:crypto.randomUUID(),players:t})}}},L=J,H=Object(C["a"])(L,D,G,!1,null,null,null),V=H.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sidebar"},[n("button",{staticClass:"sidebar__item sidebar__button button",on:{click:e.createTournament}},[e._v(" Create Tournament ")]),n("ul",{staticClass:"sidebar__list"},e._l(e.tournaments,(function(t,r){return n("li",{key:t.id,staticClass:"sidebar__item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedTournament,expression:"selectedTournament"}],staticClass:"sidebar__radio",attrs:{id:"tournament-list-"+t.id,type:"radio",name:"tournament-list"},domProps:{value:r,checked:e._q(e.selectedTournament,r)},on:{change:function(t){e.selectedTournament=r}}}),n("label",{staticClass:"sidebar__label",attrs:{for:"tournament-list-"+t.id}},[e._v(" "+e._s(t.name)+" ")])])})),0)])},z=[],F={name:"RRTournamentList",props:{tournaments:{type:Array,required:!0},value:{type:Number,default:null}},computed:{selectedTournament:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{createTournament:function(){this.$emit("tournament-create")}}},K=F,Q=(n("15db"),Object(C["a"])(K,X,z,!1,null,"d18fe270",null)),Y=Q.exports,Z={name:"App",components:{RRTournament:W,RRTournamentCreate:V,RRTournamentList:Y},data:function(){return{selectedTournamentIndex:null,tournaments:[]}},computed:{selectedTournament:function(){return this.tournaments[this.selectedTournamentIndex]}},watch:{tournaments:{deep:!0,handler:function(){localStorage.setItem("tournaments",JSON.stringify(this.tournaments))}}},mounted:function(){if(localStorage.getItem("tournaments"))try{this.tournaments=JSON.parse(localStorage.getItem("tournaments"))}catch(e){localStorage.removeItem("tournaments")}},methods:{createTournament:function(){this.selectedTournamentIndex=null},startTournament:function(e){var t=e.tournamentName,n=e.tournamentId,r=e.players,a=r.reduce((function(e,t){return e[t.id]=t.name,e}),{}),s=r.map((function(e){return e.id})),o={name:t,id:n,playerNames:a,playersOrder:s,rounds:u(s),hasEnded:!1};this.tournaments.push(o),this.selectedTournamentIndex=this.tournaments.length-1},endTournament:function(e){this.tournaments[e].hasEnded=!0},deleteTournament:function(e){this.tournaments.splice(e,1)},showTournament:function(e){this.selectedTournamentIndex=e}}},ee=Z,te=(n("114b"),n("6862"),Object(C["a"])(ee,a,s,!1,null,null,null)),ne=te.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(ne)}}).$mount("#app")},6862:function(e,t,n){"use strict";n("50c0")},"753d":function(e,t,n){"use strict";n("c8be")},"81a8":function(e,t,n){"use strict";n("445d")},"8cbc":function(e,t,n){"use strict";n("433b")},c8be:function(e,t,n){},d612:function(e,t,n){},e6b1:function(e,t,n){"use strict";n("e910")},e910:function(e,t,n){}});
//# sourceMappingURL=app.3944aae7.js.map